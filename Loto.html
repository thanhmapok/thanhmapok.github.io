<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Loto</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<style>
	body{font-family:Arial, Helvetica, sans-serif}
	td{min-width:50px; border-radius: 3px; border: solid 1px #777;}
	table{border:solid 2px #444; border-radius: 5px}
	.loto{float:left; margin-right:45px}
	.wrapper{width:1100px; margin:auto}
	.color{background:#C03 !important; color:#fff}
	.delete_table{background: #939393;color: #fff;font-size: 25px;font-weight: bold;text-align: center;border-radius: 3px;cursor: pointer;}
    #number_current {position: fixed;left: 0;font-size: 135px; top:0}
    #number_recent{position:fixed;right:50px;font-size:20px;width:50px; height: 100%;overflow:auto;}
    #check_box{ margin: 10px auto;overflow: hidden;}
    #check_box input { float: left; height:30px; font-size:30px; color:#f00; width:100px;}
    #check_box button{ width:100px; height:30px; margin-left:15px;}
    .txtCheck{ margin-left:10px}
	@-webkit-keyframes blink{
		0% {background:#CC0033}
		50% {background:blue}
		100% {background:#CC0033}
	}
	@keyframes blink{
		0% {background:#CC0033}
		50% {background:blue}
		100% {background:#CC0033}
	}
	.blink{-webkit-animation:blink 0.5s infinite; animation:blink 0.5s infinite; -moz-animation:blink 0.5s infinite}
</style>
<script>
    var array_doc = [];
    var i;
    for (i = 1; i <= 90; i++) {
        array_doc.push(i);
    }
		function randomIntFromInterval(min,max)
		{
			return Math.floor(Math.random()*(max-min+1)+min);
		}
	function random_table(number_table){
	    count_number = 0;
	    var number_index = 0;
		var array0 = [1,2,3,4,5,6,7,8,9];
		var array1 = [10,11,12,13,14,15,16,17,18,19];
		var array2 = [20,21,22,23,24,25,26,27,28,29];
		var array3 = [30,31,32,33,34,35,36,37,38,39];
		var array4 = [40,41,42,43,44,45,46,47,48,49];
		var array5 = [50,51,52,53,54,55,56,57,58,59];		
		var array6 = [60,61,62,63,64,65,66,67,68,69];
		var array7 = [70,71,72,73,74,75,76,77,78,79];
		var array8 = [80,81,82,83,84,85,86,87,88,89,90];
		$("table").each(function (index_tb, element) {
		    if (number_index < number_table){
		        number_index++;
		        var tong_true = 0;
		        var tong_false = 0;
		        var show,x,check,x_min,x_max;
		
		        $("table:eq("+index_tb+") tr").each(function(index_tr, element) {
		            tong_true = 0;
		            tong_false = 0;
		            count_lap = 0;
		            $("table:eq("+index_tb+") tr:eq("+index_tr+") td").each(function(index1, element) {
		                var array_name = eval('array'+index1);
		                //alert(array_name);
		                if(tong_true == 0 && index1 > 2 && array_name.length /(18 - index_tr) > 0.6)
		                {
		                    x = array_name[Math.floor(Math.random() * array_name.length)];
		                    var ind = array_name.indexOf(x);
		                    if(ind > -1){
		                        array_name.splice(ind,1);
		                        $(this).html(x);
		                        tong_true++;
		                        count_number++;
		                        count_lap++;
		                    }
		                }
		                else{
		                    show = randomIntFromInterval(0,1)
		                    if(show==0 && tong_false<4){
		                        tong_false++;	
		                        count_lap=0;
		                    }
		                    else{
		                        if((show==1 && tong_true<5) || tong_false==4){
		                            if(count_lap < 3){
		                                x = array_name[Math.floor(Math.random() * array_name.length)];
		                                var ind = array_name.indexOf(x);
		                                if(ind > -1){
		                                    array_name.splice(ind,1);
		                                    $(this).html(x);
		                                    tong_true++;
		                                    count_number++;
		                                    count_lap++;
		                                }
		                            }else if(count_lap==3){return;}
		                        }
		                    }
		                }
		            });
		            td_re=0;
		            while(tong_true<5 && td_re< 5){
		                $("table:eq("+index_tb+") tr:eq("+index_tr+") td").each(function(index1, element) {
		                    if(tong_true == 5 || td_re == 5){
		                        return;
		                    }
		                    if($(this).html().trim() == ""){
		                        var array_name = eval('array'+index1);
		                        x = array_name[Math.floor(Math.random() * array_name.length)];
		                        var ind = array_name.indexOf(x);
		                        if(ind > -1){
		                            array_name.splice(ind,1);
		                            $(this).html(x);
		                            tong_true++;
		                            count_number++;
		                        }
		                        else
		                            td_re++;
		                    }
		                    //alert(td_re);
		                });
		            }
		        });
		    }
		    });
	}
	$(document).ready(function () {
		var array_color = ["#E0D732","#32B2E0","#DCE032","#AAA","#32E0DA"];
		var color_selected = array_color[Math.floor(Math.random() * array_color.length)];
	    var number = prompt("Chơi bao nhiêu tờ", "2");
	    if (number == null) {
	        number = 2;
	    }
	    if (number == 1) {
	        random_table(number);
	    }
	    else {
	        random_table(number);
	        while (count_number < 90) {
	            $("td").html('');
	            $("td").css("background", "#fff");
	            random_table(number);
	        }
	    }
		$("td").each(function() {
              if($(this).html().trim()=="")
				$(this).css("background",color_selected);
            });
		/////////////////////////////////////////
		////////////////////click//////////////////
		$("td").click(function(){
			if($(this).html().trim()!=""){
				$(this).toggleClass("color");
				var tong_selected = $(this).parent().find($(".color")).length;	
				if(tong_selected==5){
					$(this).parent().find(".color").addClass("blink");
				}else{
					$(this).parent().find("td").removeClass("blink");	
				}
			}	
		});
		$(".delete_table").click(function(){
			$(this).next().hide();	
			$(this).hide();
		});
		$(document).keyup(function (k) {
		    if (k.keyCode == 13) {
		        x = array_doc[Math.floor(Math.random() * array_doc.length)];
		        var ind = array_doc.indexOf(x);
		        if (ind > -1) {
		            array_doc.splice(ind, 1);
		            $("#number_current").html(x);
		            $("#number_recent").append(x + " <br/> ");
		        }
		    }
		});
		$("button").click(function () {
		    var hasvalue = 0;
		    $(".txtCheck").each(function () {
		         giatri = this.value;
		         var ind = array_doc.indexOf(parseInt(giatri));
		        if (ind > -1 || giatri == "") {
		            hasvalue++;
		        }
		    });
		    if (hasvalue == 0)
		        alert('Đã KINH');
            else
		        alert('Chưa KINH');
		});
	});
</script>
</head>

<body>
<div class="true"></div>
<div class="false"></div>
<div class="wrapper">
<div id="check_box">
    <input type="text" class="txtCheck"/><input type="text" class="txtCheck" /><input type="text" class="txtCheck" />
    <input type="text" class="txtCheck" /> <input type="text" class="txtCheck" /> 
    <button> Check </button>
</div>
    <div style="clear:both"></div>
<div id="number_current">0</div>
<div id="number_recent"></div>
<div class="loto">
	<table style="text-align:center; font-size:40px; font-family:Arial, Helvetica, sans-serif" width="450" height="900" border="1" cellspacing="1">
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>
</div>
<div class="loto">
	<table style="text-align:center; font-size:40px; font-family:Arial, Helvetica, sans-serif" width="450" height="900" border="1" cellspacing="1">
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>
</div>

</div>
</body>
</html>
